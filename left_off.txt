fix bugs, make run server work and learn select()